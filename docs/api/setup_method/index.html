<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My New Hugo Site</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital@1&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link rel="stylesheet" href="/OpenSR-test/css/style.css">
</head><body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary nav nav_principal fixed-top">
  <div class="container-fluid div-nav" style="width: 60%;">
    <a class="navbar-brand fs-4 a" href="/" style="margin-left: 30px; font-weight: 700; color: #d6d6d6;">
      <img src="/imgs/logo_opensrtest.png" style="height:30px;">
      OpenSR test
    </a>
  </div>

  
  <div class="container-fluid" style="width: 15%; margin-left: 30px;">
    <form class="d-flex search-form" role="search">
      <div class="input-group">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </div>
    </form>
  </div>
  

  <div class="div" style="width: 15%;  margin-left: 55px;">
    <a href="https://github.com/ESAOpenSR/opensr-test" title="Go to repository" class="md-source"
      data-md-component="source">
      <div class="md-source__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path
            d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z">
          </path>
        </svg>
      </div>
      <div class="md-source__repository" data-md-state="done" style="color: #fff;">
        OpenSR test
        <ul class="md-source__facts">
          <li class="md-source__fact md-source__fact--stars">
            <i class="far fa-star"></i> 2
          </li>
          <li class="md-source__fact md-source__fact--forks">
            <i class="fas fa-code-branch"></i> 0
          </li>

        </ul>
      </div>
    </a>
  </div>
  <div class="div2" style="width: 10%;">
    <p><i class="far fa-moon" style="color: #ffffff; font-size: 1.4em; margin-top: 13px;"></i>
    </p>
  </div>
</nav>

  <main>
    <div class="container-fluid">
      <div class="row" style="margin-top: 70px;">

        
        <div style="width: 23%;">
          <style>
  .aside {
    max-height: 80vh;
     
    overflow-y: auto;
     
  }

  .nested-nav {
    list-style-type: none;
     
  }
</style>

<aside class="aside">
  <div class="sidebar-sticky aside">
    <ul class="nav flex-column custom-nav">
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse">
          <strong>Home</strong>
        </a>
        <div class="collapse show" id="homeSection">
          <ul class="nested-nav" style="margin-left: -8px;">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/">
                Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/contributing">
                Contributing
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/code_of_conduct">
                Code of Conduct
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/changelog">
                Changelog
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/license" style="margin-bottom: 15px;">
                License
              </a>
            </li>
          </ul>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse">
          <strong>Properties</strong>
        </a>
        <div class="collapse show" id="propertiesSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/properties/main" style="margin-bottom: 15px;">
                Main
              </a>
            </li>
          </ul>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#apiSection">
          <strong>API</strong>
        </a>
        <div class="collapse show" id="apiSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/model_parameters">
                Model parameters
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/setup_method">
                Setup method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/compute_method">
                Compute method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/summary_method">
                Summary method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/results_attributes" style="margin-bottom: 20px;">
                Results attributes
              </a>
            </li>
          </ul>
        </div>
      </li>





      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#datasetSection">
          <strong>Dataset</strong>
        </a>
        <div class="collapse show" id="datasetSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/home">
                Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/naip">
                NAIP
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/spot">
                SPOT
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/venµs" style="margin-bottom: 15px;">
                Venµs
              </a>
            </li>
          </ul>
        </div>
      </li>







      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#metricsSection">
          <strong>Metrics</strong>
        </a>
        <div class="collapse show" id="metricsSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/consistency">
                Consistency metrics
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/distance">
                Distance metrics
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/correctness" style="margin-bottom: 15px;">
                Correctness metrics
              </a>
            </li>
          </ul>
        </div>
      </li>





      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#examplesSection">
          <strong>Examples</strong>
        </a>
        <div class="collapse show" id="examplesSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/pytorch_models">
                PyTorch models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/tensorflow_models">
                TensorFlow models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/diffuser_models">
                Diffuser models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/multi_image_sr_model">
                Multi-image SR model
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/create_correctness_animation"
                style="margin-bottom: 15px;">
                Create Correctness animation
              </a>
            </li>
          </ul>
        </div>
      </li>



      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#benchmarksSection">
          <strong>Benchmarks</strong>
        </a>
        <div class="collapse show" id="benchmarksSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/benchmarks">
                Benchmarks
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
</aside>
        </div>

        
        <div style="width: 54%; margin-top: 40px; margin-bottom: 10px;" id="dynamic-content">
<h1 id="heading"></h1>
<h2 id="the-setup-method">The <code>setup</code> Method</h2>
<p>The <code>setup</code> method is a pivotal function within  <a href="docs/API/model_parameters.md"><code>opensr_test.Metrics</code></a> class, responsible for initializing the evaluation process by defining the LR, SR, and HR images. In addition, it provides an option to include a land use image, must be the <a href="https://worldcover2020.esa.int/">ESA landcover product</a>, which is utilized solely for the purpose of visualization. The method also facilitates the specification of upsampling and downscaling strategies.</p>
<p>Internally, the <code>setup</code> method generates the harmonized SR image <code>SRharm</code> by applying the spatial and spectral alignment as determined by the user&rsquo;s Metric class settings. Below is a demonstration of how to employ the <code>setup</code> method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Import necessary libraries</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> torch
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> opensr_test
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Randomly generate LR, HR, SR, and land use images for illustration.</span>
</span></span><span style="display:flex;"><span>lr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">32</span>)  <span style="color:#75715e"># Low Resolution image</span>
</span></span><span style="display:flex;"><span>hr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)  <span style="color:#75715e"># High Resolution image</span>
</span></span><span style="display:flex;"><span>sr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)  <span style="color:#75715e"># Super Resolution image</span>
</span></span><span style="display:flex;"><span>landuse <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)  <span style="color:#75715e"># Land use image for visualization</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the Metrics object.</span>
</span></span><span style="display:flex;"><span>metrics <span style="color:#f92672">=</span> opensr_test<span style="color:#f92672">.</span>Metrics()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Setup the evaluation environment with the specified images and methods.</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>setup(
</span></span><span style="display:flex;"><span>    lr<span style="color:#f92672">=</span>lr,
</span></span><span style="display:flex;"><span>    sr<span style="color:#f92672">=</span>sr,
</span></span><span style="display:flex;"><span>    hr<span style="color:#f92672">=</span>hr,
</span></span><span style="display:flex;"><span>    landuse<span style="color:#f92672">=</span>landuse, <span style="color:#75715e"># Optional</span>
</span></span><span style="display:flex;"><span>    downsample_method<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;classic&#34;</span>,  <span style="color:#75715e"># Optional, Default downsample method</span>
</span></span><span style="display:flex;"><span>    upsample_method<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;classic&#34;</span>  <span style="color:#75715e"># Optional, Default upsample method</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot the comparison triplets of LR, SR, and HR images.</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>plot_quadruplets()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()  <span style="color:#75715e"># Display the plots</span>
</span></span></code></pre></div><p>By default, the <code>setup</code> method employs what are known as <code>classic</code> methods for both downsampling and upsampling operations. These <code>classic</code> methods is just a bilinear interpolation enhanced with an anti-aliasing kernel to smooth out the image and reduce the risk of aliasing artifacts. In addition, the <code>setup</code> method also support downsample and upsample methods with degradation kernels fine-tuned for the different datasets supported by <code>opensr-test</code>. See the <a href="docs/Datasets/NAIP.md">Datasets</a> section for more information.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> torch
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> opensr_test
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate sample LR, HR, SR, and land use images</span>
</span></span><span style="display:flex;"><span>lr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">32</span>)
</span></span><span style="display:flex;"><span>hr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)
</span></span><span style="display:flex;"><span>sr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)
</span></span><span style="display:flex;"><span>landuse <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the Metrics object</span>
</span></span><span style="display:flex;"><span>metrics <span style="color:#f92672">=</span> opensr_test<span style="color:#f92672">.</span>Metrics()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Setup the evaluation environment with custom downsample and default upsample methods</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>setup(
</span></span><span style="display:flex;"><span>    lr<span style="color:#f92672">=</span>lr,
</span></span><span style="display:flex;"><span>    sr<span style="color:#f92672">=</span>sr,
</span></span><span style="display:flex;"><span>    hr<span style="color:#f92672">=</span>hr,
</span></span><span style="display:flex;"><span>    landuse<span style="color:#f92672">=</span>landuse, 
</span></span><span style="display:flex;"><span>    downsample_method<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;naip&#34;</span>,  <span style="color:#75715e"># Custom downsample method (options: &#34;naip&#34;, &#34;venus&#34;, &#34;spot&#34;, &#34;classic&#34;)</span>
</span></span><span style="display:flex;"><span>    upsample_method<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;classic&#34;</span>  <span style="color:#75715e"># Default upsample method</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot comparison triplets of LR, SR, and HR images</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>plot_triplets()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()  <span style="color:#75715e"># Display the generated plots</span>
</span></span></code></pre></div>


        </div>

        
        
        <aside class="aside2" style="width: 23%;">
          <div class="sidebar-sticky aside">
            
            <h6 class="text-muted" style="margin-bottom: 0; height: 30px;">Table of contents</h6>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#the-setup-method">The <code>setup</code> Method</a></li>
  </ul>
</nav>
            
          </div>
        </aside>

        

      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.2/dist/js/bootstrap.bundle.min.js"></script>



  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      
      if (localStorage.getItem('dark-mode') === 'true') {
        document.body.classList.add('dark-mode');
        document.querySelector('.fa-moon').classList.add('fa-sun');
        document.querySelector('.fa-moon').classList.remove('fa-moon');
      }
    });

    document.querySelector('.fa-moon, .fa-sun').addEventListener('click', function () {
      document.body.classList.toggle('dark-mode');
      this.classList.toggle('fa-moon');
      this.classList.toggle('fa-sun');

      
      localStorage.setItem('dark-mode', document.body.classList.contains('dark-mode'));
    });


  </script>
</body>

</html>





