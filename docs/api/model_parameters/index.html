<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My New Hugo Site</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital@1&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link rel="stylesheet" href="/OpenSR-test/css/style.css">
</head><body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary nav nav_principal fixed-top">
  <div class="container-fluid div-nav" style="width: 60%;">
    <a class="navbar-brand fs-4 a" href="/" style="margin-left: 30px; font-weight: 700; color: #d6d6d6;">
      <img src="/OpenSR-test/imgs/logo_opensrtest.png" style="height:30px;">
      OpenSR test
    </a>
  </div>

  
  <div class="container-fluid" style="width: 15%; margin-left: 30px;">
    <form class="d-flex search-form" role="search">
      <div class="input-group">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </div>
    </form>
  </div>
  

  <div class="div" style="width: 15%;  margin-left: 55px;">
    <a href="https://github.com/ESAOpenSR/opensr-test" title="Go to repository" class="md-source"
      data-md-component="source">
      <div class="md-source__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
          <path
            d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z">
          </path>
        </svg>
      </div>
      <div class="md-source__repository" data-md-state="done" style="color: #fff;">
        OpenSR test
        <ul class="md-source__facts">
          <li class="md-source__fact md-source__fact--stars">
            <i class="far fa-star"></i> 2
          </li>
          <li class="md-source__fact md-source__fact--forks">
            <i class="fas fa-code-branch"></i> 0
          </li>

        </ul>
      </div>
    </a>
  </div>
  <div class="div2" style="width: 10%;">
    <p><i class="far fa-moon" style="color: #ffffff; font-size: 1.4em; margin-top: 13px;"></i>
    </p>
  </div>
</nav>

  <main>
    <div class="container-fluid">
      <div class="row" style="margin-top: 70px;">

        
        <div style="width: 23%;">
          <style>
  .aside {
    max-height: 80vh;
     
    overflow-y: auto;
     
  }

  .nested-nav {
    list-style-type: none;
     
  }
</style>

<aside class="aside">
  <div class="sidebar-sticky aside">
    <ul class="nav flex-column custom-nav">
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse">
          <strong>Home</strong>
        </a>
        <div class="collapse show" id="homeSection">
          <ul class="nested-nav" style="margin-left: -8px;">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/">
                Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/contributing">
                Contributing
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/code_of_conduct">
                Code of Conduct
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/changelog">
                Changelog
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/home/license" style="margin-bottom: 15px;">
                License
              </a>
            </li>
          </ul>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse">
          <strong>Properties</strong>
        </a>
        <div class="collapse show" id="propertiesSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/properties/main" style="margin-bottom: 15px;">
                Main
              </a>
            </li>
          </ul>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#apiSection">
          <strong>API</strong>
        </a>
        <div class="collapse show" id="apiSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/model_parameters">
                Model parameters
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/setup_method">
                Setup method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/compute_method">
                Compute method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/summary_method">
                Summary method
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/api/results_attributes" style="margin-bottom: 20px;">
                Results attributes
              </a>
            </li>
          </ul>
        </div>
      </li>





      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#datasetSection">
          <strong>Dataset</strong>
        </a>
        <div class="collapse show" id="datasetSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/home">
                Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/naip">
                NAIP
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/spot">
                SPOT
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/dataset/venµs" style="margin-bottom: 15px;">
                Venµs
              </a>
            </li>
          </ul>
        </div>
      </li>







      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#metricsSection">
          <strong>Metrics</strong>
        </a>
        <div class="collapse show" id="metricsSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/consistency">
                Consistency metrics
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/distance">
                Distance metrics
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/metrics/correctness" style="margin-bottom: 15px;">
                Correctness metrics
              </a>
            </li>
          </ul>
        </div>
      </li>





      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#examplesSection">
          <strong>Examples</strong>
        </a>
        <div class="collapse show" id="examplesSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/pytorch_models">
                PyTorch models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/tensorflow_models">
                TensorFlow models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/diffuser_models">
                Diffuser models
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/multi_image_sr_model">
                Multi-image SR model
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/examples/create_correctness_animation"
                style="margin-bottom: 15px;">
                Create Correctness animation
              </a>
            </li>
          </ul>
        </div>
      </li>



      <li class="nav-item">
        <a class="nav-link" id="subtitle" data-toggle="collapse" href="#benchmarksSection">
          <strong>Benchmarks</strong>
        </a>
        <div class="collapse show" id="benchmarksSection">
          <ul class="nested-nav">
            <li class="nav-item">
              <a class="nav-link" href="/OpenSR-test/benchmarks">
                Benchmarks
              </a>
            </li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
</aside>
        </div>

        
        <div style="width: 54%; margin-top: 40px; margin-bottom: 10px;" id="dynamic-content">
<h1 id="heading"></h1>
<h2 id="model-parameters">Model Parameters</h2>
<p><code>opensr-test</code> utilizes <a href="https://docs.pydantic.dev/latest/">pydantic</a> for defining model parameters, ensuring type safety and ease of configuration. The parameters are categorized into three groups, each catering to different aspects of the super-resolution (SR) evaluation process:</p>
<h3 id="global-parameters">Global Parameters:</h3>
<p>These parameters control the overall behavior of the SR assessment:</p>
<ul>
<li><strong>device:</strong> Selects the computation device for inference, defaulting to <code>cpu</code>. <code>cuda</code> is also supported for GPU acceleration.</li>
<li><strong>distance_method:</strong> Specifies the distance metric between SR, LR, and HR images. Defaults to &ldquo;L1&rdquo;, with support for other metrics like KL, L2, PBIAS, RMSE, 1/PSNR, SAD, CROSSMTF, CLIP and LPIPS. See section <a href="docs/Metrics/consistency.md">Metrics</a> for more details.</li>
<li><strong>agg_method:</strong> Determines the granularity for distance metric application — pixel-wise by default (&ldquo;pixel&rdquo;), with &ldquo;patch&rdquo; and &ldquo;image&rdquo; level aggregations options.</li>
<li><strong>patch_size:</strong> Relevant when <code>agg_method</code> is &ldquo;patch&rdquo;, this defines the patch size for distance metric computation.</li>
<li><strong>border_mask:</strong> Excludes image borders in metric calculations, ignoring the outer 16 pixels by default.</li>
<li><strong>rgb_bands:</strong> Necessary for certain metrics like LPIPS and plot generation, assuming a default order of Red-Green-Blue ([0, 1, 2]).</li>
<li><strong>harm_apply_spectral:</strong> Applies histogram matching before distance metric calculation, enabled by default.</li>
<li><strong>harm_apply_spatial:</strong> Activates spatial alignment before distance metric calculation, enabled by default.</li>
</ul>
<h3 id="spatial-parameters">Spatial Parameters:</h3>
<p>These parameters fine-tune the spatial feature extraction and matching process:</p>
<ul>
<li><strong>spatial_features:</strong> The default feature extractor is &ldquo;superpoint&rdquo;, with &ldquo;disk&rdquo; also available.</li>
<li><strong>spatial_matcher:</strong> Sets the matcher for feature points, defaulting to &ldquo;lightglue&rdquo;.</li>
<li><strong>spatial_max_num_keypoints:</strong> Caps the number of keypoints for feature matching at 1000 by default.</li>
<li><strong>spatial_threshold_distance:</strong> The maximum permissible distance between keypoints for a match, set to 5 pixels.</li>
<li><strong>spatial_threshold_npoints:</strong> The minimum required keypoints for alignment, set to 5. Spatial alignment is skipped if keypoints fall below this threshold.</li>
</ul>
<h3 id="spectral-parameters">Spectral Parameters:</h3>
<p>These parameters are specific to spectral analysis and alignment:</p>
<ul>
<li>
<p><strong>reflectance_method:</strong> The default method for reflectance estimation is &ldquo;l1&rdquo;, with &ldquo;kl&rdquo;, &ldquo;l1&rdquo;, &ldquo;l2&rdquo;, and &ldquo;pbias&rdquo; as alternatives.</p>
</li>
<li>
<p><strong>spectral_method:</strong> For spectral alignment, &ldquo;sad&rdquo; is the default method.</p>
</li>
</ul>
<p>Below is an illustrative example of how to instantiate <code>opensr-test</code> with user-defined parameters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> torch
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> opensr_test
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define the Low Resolution (LR), High Resolution (HR), and Super-Resolved (SR) images.</span>
</span></span><span style="display:flex;"><span>lr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">32</span>)
</span></span><span style="display:flex;"><span>hr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)
</span></span><span style="display:flex;"><span>sr <span style="color:#f92672">=</span> torch<span style="color:#f92672">.</span>rand(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the Metrics object with custom parameters.</span>
</span></span><span style="display:flex;"><span>metrics <span style="color:#f92672">=</span> opensr_test<span style="color:#f92672">.</span>Metrics(
</span></span><span style="display:flex;"><span>    device<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cpu&#34;</span>,
</span></span><span style="display:flex;"><span>    spatial_features<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;disk&#34;</span>,
</span></span><span style="display:flex;"><span>    spatial_max_num_keypoints<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>,
</span></span><span style="display:flex;"><span>    harm_apply_spectral<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Setup the evaluation environment with the LR, SR, and HR images.</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>setup(lr<span style="color:#f92672">=</span>lr, sr<span style="color:#f92672">=</span>sr, hr<span style="color:#f92672">=</span>hr)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Compute the metrics based on the provided images.</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>compute()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate a summary report of the evaluation.</span>
</span></span><span style="display:flex;"><span>metrics<span style="color:#f92672">.</span>summary()
</span></span></code></pre></div>


        </div>

        
        
        <aside class="aside2" style="width: 23%;">
          <div class="sidebar-sticky aside">
            
            <h6 class="text-muted" style="margin-bottom: 0; height: 30px;">Table of contents</h6>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#model-parameters">Model Parameters</a>
      <ul>
        <li><a href="#global-parameters">Global Parameters:</a></li>
        <li><a href="#spatial-parameters">Spatial Parameters:</a></li>
        <li><a href="#spectral-parameters">Spectral Parameters:</a></li>
      </ul>
    </li>
  </ul>
</nav>
            
          </div>
        </aside>

        

      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.2/dist/js/bootstrap.bundle.min.js"></script>



  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      
      if (localStorage.getItem('dark-mode') === 'true') {
        document.body.classList.add('dark-mode');
        document.querySelector('.fa-moon').classList.add('fa-sun');
        document.querySelector('.fa-moon').classList.remove('fa-moon');
      }
    });

    document.querySelector('.fa-moon, .fa-sun').addEventListener('click', function () {
      document.body.classList.toggle('dark-mode');
      this.classList.toggle('fa-moon');
      this.classList.toggle('fa-sun');

      
      localStorage.setItem('dark-mode', document.body.classList.contains('dark-mode'));
    });

    document.addEventListener('DOMContentLoaded', function () {
      
      const tocLinks = document.querySelectorAll('.aside2 #TableOfContents a');

      tocLinks.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault(); 

          const targetId = this.getAttribute('href').substring(1);
          const target = document.getElementById(targetId);

          if (target) {
            
            const top = target.getBoundingClientRect().top + window.pageYOffset - 70; 

            window.scrollTo({ top: top, behavior: 'smooth' });
          }
        });
      });
    });

    
    document.addEventListener('DOMContentLoaded', () => {
      
      document.querySelectorAll('.aside2 .nav-link').forEach(link => {
        link.addEventListener('click', function () {
          document.querySelectorAll('.aside2 .nav-link').forEach(navLink => navLink.classList.remove('current-right-link'));
          this.classList.add('current-right-link');
        });
      });

      
      window.addEventListener('scroll', () => {
        const sections = document.querySelectorAll('section'); 
        let currentSectionId = '';

        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          if (window.scrollY >= sectionTop - 10) {
            currentSectionId = section.getAttribute('id');
          }
        });

        document.querySelectorAll('.aside2 .nav-link').forEach(link => {
          link.classList.remove('current-right-link');
          if (link.getAttribute('href') === `#${currentSectionId}`) {
            link.classList.add('current-right-link');
          }
        });
      });
    });



    
    document.addEventListener('DOMContentLoaded', () => {
      
      const currentLink = localStorage.getItem('currentLink');
      if (currentLink) {
        const activeLink = document.querySelector(`.nav-link[href="${currentLink}"]`);
        if (activeLink) {
          activeLink.classList.add('current-link');
        }
      } else {
        
        const path = window.location.pathname;
        document.querySelectorAll('.nav-link').forEach(link => {
          if (link.getAttribute('href') === path) {
            link.classList.add('current-link');
          }
        });
      }

      
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function () {
          
          document.querySelectorAll('.nav-link').forEach(navLink => navLink.classList.remove('current-link'));

          
          this.classList.add('current-link');
          localStorage.setItem('currentLink', this.getAttribute('href'));
        });
      });
    });



  </script>

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js">
  </script>


</body>
<script>
  MathJax.typeset();
</script>


</html>





